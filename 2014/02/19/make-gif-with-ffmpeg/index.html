<!DOCTYPE html><html lang="zh_CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 使用 FFmpeg 制作 GIF · Phoenix's island</title><meta name="description" content="使用 FFmpeg 制作 GIF - Phoenix Nemo"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/null"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://blog.phoenixlzx.com/atom.xml" title="Phoenix's island"><meta name="generator" content="Hexo 5.1.1"><link rel="alternate" href="/atom.xml" title="Phoenix's island" type="application/atom+xml">
</head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/static/img/avatar/avatar.jpg"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">ABOUT</a></li><li class="nav-list-item"><a href="/links/" target="_self" class="nav-list-link">LINKS</a></li><li class="nav-list-item"><a href="https://github.com/phoenixlzx" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">使用 FFmpeg 制作 GIF</h1><div class="post-info">2014年2月19日</div><div class="post-content"><p>貌似好久之前秋水学姐就问过如何制作 GIF，回想当时制作境界の彼方中「約束の絆」的<a target="_blank" rel="noopener" href="https://plus.google.com/u/0/+PhoenixNemo/posts/RqPTgGrksLV">GIF动画</a>，现在也已经把命令忘光了。所以觉得还是稍微做个笔记。</p>
<a id="more"></a>

<p>只需要用到 FFmpeg。绝大多数发行版都已经将它收录官方仓库，通过包管理器就可以安装。</p>
<p>假设我们需要转换的视频文件是 <code>input.ogg</code>，输出的GIF文件是 <code>output.gif</code>。这里不讨论如何截取视频中的段落(因为命令太繁<del>烦</del>琐了)等视频剪辑的问题，需要转换的视频已经经过简单处理，可以直接使用。</p>
<p>基本命令：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -<span class="selector-tag">i</span> <span class="selector-tag">input</span><span class="selector-class">.ogg</span> output.gif</span><br></pre></td></tr></table></figure>

<p>第一次制作的gif就是这么来的。然后当我试图上传到 Google+ 的时候发现…</p>
<p><strong>区区几百KB的视频片段制作出来的GIF竟然有20M之巨啊！</strong> <del>原视频是1080p 50fps的 flv</del></p>
<p>于是需要两个参数，一个是缩小分辨率一个是减少帧数。50帧确实少见，但是一般来讲 gif 有15帧左右就比较流畅了。命令</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ffmpeg</span> -i input.ogg -s <span class="number">640</span>x<span class="number">320</span> -r <span class="number">15</span> output.gif</span><br></pre></td></tr></table></figure>

<p>很多人喜欢把 <code>-r</code> 选项放在前面… 按照某个早就忘记在哪的邮件列表里的说法，<code>-r</code> 放在 <em>输入文件</em> 的 <strong>后面</strong> 才是输出文件的效果。上面的命令出来的结果就是分辨率为<code>640×320</code>，帧率为15的gif了。<code>640x320</code> 中间是小写字母 <code>x</code> <del>别像某人一样特地复制了一份 <code>×</code> 进去…</del></p>
</div></article></div></section><footer><div class="paginator"><a href="/2014/02/23/kernel-hook-auto-build-dkms-modules/" class="prev">PREV</a><a href="/2014/02/17/file-upload-with-expressjs-and-formidable/" class="next">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'phoenixhexo';
var disqus_identifier = '2014/02/19/make-gif-with-ffmpeg/';
var disqus_title = '使用 FFmpeg 制作 GIF';
var disqus_url = 'https://blog.phoenixlzx.com/2014/02/19/make-gif-with-ffmpeg/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//phoenixhexo.disqus.com/count.js" async></script><div class="copyright"><p>© 2014 - 2022 <a href="https://blog.phoenixlzx.com">Phoenix Nemo</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><!--script(async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML")--><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-48847648-1",'auto');ga('send','pageview');</script></body></html>